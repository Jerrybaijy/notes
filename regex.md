---
title: regex
author: Jerry.Baijy
tags:
  - 应用科学
  - it
  - it-basics
---

# Overview

**正则表达式（Regular Expression，简称 Regex 或 RegExp）**是一种强大的文本处理工具，用于**匹配、搜索、提取和替换**字符串中的特定模式。

# 基本组成

## 普通字符

- 直接匹配对应的文本。
- 示例：

  - 正则：`apple`
  - 匹配：`apple`（精确匹配）。

## 元字符

**元字符**是正则表达式的核心，用于指定复杂匹配规则。如 `\d` 用于匹配数字。

# 数字

- `\d`：匹配数字
  - 等价于 `[0-9]`

  - **示例**：`\d+` 匹配 `123`、`45`

- `\D`：匹配非数字
  - 等价于 `[^0-9]`
  - **示例**：`\D+` 匹配 `abc`、`!@#`。
- `\.` 匹配小数点

- `-?` 匹配负数

# 字母、数字或下划线

- `\w` 匹配字母、数字或下划线（等价于 `[a-zA-Z0-9_]`）。
  - **示例**：`\w+` 匹配 `hello_123`。

- `\W` 匹配非字母、数字或下划线（等价于 `[^a-zA-Z0-9_]`）。
  - **示例**：`\W+` 匹配 `!@#`。

# 空白字符

- `\s` 匹配空白字符（空格、制表符、换行符等）。
  - **示例**：`\s+` 匹配空格或换行。

- `\S` 匹配非空白字符。

  - **示例**：`\S+` 匹配 `abc` 或 `123`。

# 字符数量

- `.`：匹配任意单个字符（除了换行符）
  - **示例**：`a.b` 匹配 `a+b`, `a b` 等。

- `?` 匹配 0 个或 1 个特定字符。

  - **示例**：`a?` 匹配 0 个或 1 个 `a`。

- `*` 匹配 0 个或多个特定字符。
  - **示例**：`a*` 匹配 0 个或多个 `a`

- `+` 匹配 1 个或多个特定字符。
  - **示例**：`a+` 匹配 `a`、`aa`、`aaa`。

- `{n}` 匹配 n 个特定字符。
  - **示例**：`a{3}` 匹配 `aaa`。

- `{n,}` 匹配至少 n 个特定字符。
  - **示例**：`a{2,}` 匹配 `aa`、`aaa` 等。

- `{n,m}` 匹配 n-m 个特定字符。
  - **示例**：`a{2,4}` 匹配 `aa`、`aaa`、`aaaa`。

# 开头接尾

- `^` 以……开头。

  - **示例**：`^Hello` 匹配以 `Hello` 开头的字符串。

- `(?<!开始内容)` 不以 `开始内容` 开头
- `$` 匹配字符串的结尾。

  - **示例**：`World$` 匹配以 `World` 结尾的字符串。

- `\` 转义字符，用于匹配特殊字符。
- **示例**：`\.` 匹配 `.`，`\*` 匹配 `*`。

# 选择

- `|` 表示“或”操作。

  - **示例**：`a|b` 匹配 **`a`** 或 **`b`**。

- `()` 分组，捕获子表达式。

  - **示例**：`(abc)` 匹配并捕获 `abc`。
  - `(?<=开始内容)` 正向后顾，匹配前面 **紧跟** “开始内容”的字符
  - `(?<!开始内容)` 负向后顾，匹配前面 **不紧跟** “开始内容”的字符
  - `(?=结尾内容)` 正向前瞻，匹配后面 **紧跟** “结尾内容”的字符
  - `(?!结尾内容)` 负向前瞻，匹配后面 **不紧跟**“结尾内容”的字符

- `[]` 匹配字符集中的任意一个字符。
  - **示例**：`[abc]` 匹配 `a`、`b` 或 `c`。

- `[^]` 匹配不在字符集中的任意一个字符。

  - **示例**：`[^abc]` 匹配除了 `a`、`b`、`c` 的任意字符。

# 实例

- word 里的项目编号 `a.  `

  ```basic
  [a-zA-Z]\.
  ```

- word 里的项目编号 `a)  `

  ```basic
  [a-zA-Z]\)
  ```

- Markdown 超链接 `[链接名称](URL)`

  ```basic
  (?<!!)\[([^\]]+)\]\([^\)]+\)
  ```

- Markdown 图片链接 `![链接名称](SRC)`

  ```basic
  \[([^\]]+)\]\([^\)]+\)
  ```

- 直角引号换全角引号，不搜索图片和超链接，不改变引号中内容

  ```basic
  ' 查找
  (?<![!\[])\"([^"]+?)\"
  ' 替换
  “$1”
  ```

  - **(?<![![])**：负向后顾，不以 `!` 或 `[` 开头
  - **\\"**：匹配 `"`
  - **[^"]**：字符类，以 `"` 开头的字符。
  - **+?**：最小匹配，表示匹配尽可能少的字符，直到遇到双引号为止。
  - **\\"**：匹配 `"`

- 英文括号换中文括号，不搜索图片和超链接，不改变引号中内容

  ```basic
  ' 查找
  (?<!\])\(([^(]+?)\)
  ' 替换
  （$1）
  ```

  - **(?<!\])**：负向后顾，不以`]` 开头
  - **\\(**：匹配 `)`
  - **[^()]**：字符类，以 `(` 开头的字符。
  - **+?**：最小匹配，表示匹配尽可能少的字符，直到遇到右括号为止。
  - **\\)**：匹配 `)`
  - **$1**：反向引用，即捕获组里的内容

- 在数字和长横线之间插入内容

  ```basic
  (\d+)—
  $1年—
  ```
